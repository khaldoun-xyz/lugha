{% extends "base.html" %}

{% block title %}Lugha - Language Competence Evaluation{% endblock %}

{% block extra_head %}
    <meta name="description" content="Lugha - Evaluate and improve your language competence through interactive conversations">
    <meta name="keywords" content="language learning, language evaluation, language competence, language assessment, online learning">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %}

{% block content %}
    <div class="welcome-container">
        <div class="welcome-card">
            <div class="logo-container">
                <div class="logo-icon">L</div>
                <div class="logo-text">Lugha</div>
            </div>
            <h1 class="welcome-title">
                Evaluate your <span>language</span>
                <br>
                competence
            </h1>
            <div class="form-container">
                <div class="form-group-half">
                    <label for="username">
                        <i data-feather="user"></i> Enter your name:
                    </label>
                    <input type="text" class="form-control" id="username" placeholder="Your Name" required>
                </div>
                <div class="form-row">
                    <div class="form-group-half">
                        <label for="language">
                            <i data-feather="globe"></i> Choose a language:
                        </label>
                        <select class="form-control dropdown-select" id="language">
                            <option value="arabic">Arabic</option>
                            <option value="english" selected>English</option>
                            <option value="french">French</option>
                            <option value="german">German</option>
                            <option value="italian">Italian</option>
                            <option value="spanish">Spanish</option>
                            <option value="swedish">Swedish</option>
                        </select>
                    </div>
                    <div class="form-group-half">
                        <label for="mode">
                            <i data-feather="bookmark"></i> Preferred Mode:
                        </label>
                        <select class="form-control dropdown-select" id="mode">
                            <option value="talk">Talk</option>
                            <option value="learn">Learn</option>
                        </select>
                        <div style="color: #e0e0e9; margin-top: 4px; font-size: 11px;">
                            <i class="fas fa-info-circle" style="color: #e0e0e0; margin-right: 2px; "></i>
                            Talk: Natural conversation | Learn: Guided Conversation with translations & corrections
                        </div>
                    </div>
                </div>
                <button id="start-conversation" class="btn">
                    <i data-feather="message-circle"></i>
                    Start Conversation
                </button>
            </div>
        </div>
    </div>
{% endblock %}

{% block extra_scripts %}
    <script>
        $(document).ready(function () {
            feather.replace();

            $('#start-conversation').click(function () {
                const username = $('#username').val();
                const language = $('#language').val();
                const mode = $('#mode').val();

                localStorage.setItem("username", username);
                localStorage.setItem("language", language);
                localStorage.setItem("mode", mode);
                if (username && language && mode) {
                    window.location.href = `/chat-interface?username=${encodeURIComponent(username)}&language=${encodeURIComponent(language)}&mode=${encodeURIComponent(mode)}`;
                } else {
                    alert('Please fill in all required fields.');
                }
            });
        });
    </script>
{% endblock %}
